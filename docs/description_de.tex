\documentclass[12pt]{article}
\usepackage{acro}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{authblk}
\usepackage[ngerman]{babel}
\usepackage{booktabs}
\usepackage{cite}
\usepackage{graphicx}
\usepackage[colorlinks=true, linkcolor={51,92,122}]{hyperref}
\usepackage{geometry}
\usepackage{longtable}
\usepackage{makecell}
\usepackage[numbers]{natbib}
\usepackage{todonotes}
\usepackage{siunitx}
\usepackage{eurosym}
\usepackage{xcolor}

%acro
\acsetup{make-links = true,}

% authblk
\renewcommand\Authand{, }
\renewcommand\Authands{, }

% babel
\addto\extrasngerman{
    \def\sectionautorefname{Abschnitt}
    \def\subsectionautorefname{Abschnitt}
    \def\subsubsectionautorefname{Abschnitt}
}

%xcolor
\definecolor{tum_p300}			{cmyk}	{1,0.43,0,0}%primary blue
\definecolor{tum_p301_100}		{cmyk}	{1,0.54,0.04,0.19}%secondary blue
\definecolor{tum_p301_80}		{cmyk}	{0.8,0.432,0.032,0.152}%
\definecolor{tum_p301_50}		{cmyk}	{0.5,0.27,0.02,0.095}%
\definecolor{tum_p301_20}		{cmyk}	{0.2,0.108,0.008,0.038}%
\definecolor{tum_p540_100}		{cmyk}	{1,0.57,0.12,0.70}%tertiary blue
\definecolor{tum_p540_80}		{cmyk}	{0.8,0.456,0.096,0.56}%
\definecolor{tum_p540_50}		{cmyk}	{0.5,0.285,0.06,0.35}%
\definecolor{tum_p540_20}		{cmyk}	{0.2,0.114,0.024,0.14}%
\definecolor{tum_black}			{cmyk}	{0,0,0,1}%black/white
\definecolor{tum_grey_80}		{cmyk}	{0,0,0,0.8}%
\definecolor{tum_grey_50}		{cmyk}	{0,0,0,0.5}%
\definecolor{tum_grey_20}		{cmyk}	{0,0,0,0.2}%
\definecolor{tum_white}			{cmyk}	{0,0,0,0}%
\definecolor{tum_p542}			{cmyk}	{0.65,0.19,0.01,0.04}%tertiary colors
\definecolor{tum_p283}			{cmyk}	{0.42,0.09,0,0}%
\definecolor{tum_ivory}			{cmyk}	{0.03,0.04,0.14,0.08}%
\definecolor{tum_orange}		{cmyk}	{0,0.65,0.95,0}%
\definecolor{tum_green}			{cmyk}	{0.35,0,1,0.2}%

%hyperref
\hypersetup{
    colorlinks = true,
    linkcolor = tum_p540_80,
    urlcolor = tum_p300,
    citecolor = tum_p540_80,
}

% siunitx
\DeclareSIUnit{\kwp}{kW\textsubscript{p}}
\DeclareSIUnit{\euro}{\text{\euro}}
\DeclareSIUnit{\kwh}{kW\,h}
\DeclareSIUnit{\year}{a}
\DeclareSIUnit{\ton}{t}
\sisetup{locale = DE}

% acro
\DeclareAcroEnding{possessive}{}{}
\NewAcroCommand\acg{m}{\acropossessive\UseAcroTemplate{first}{#1}}
\NewAcroCommand\acsg{m}{\acropossessive\UseAcroTemplate{short}{#1}}
\NewAcroCommand\aclg{m}{\acropossessive\UseAcroTemplate{long}{#1}}
\DeclareAcronym{ac}{short=AC, long=Wechselstrom,}
\DeclareAcronym{bdew}{short=BDEW, long=Bundesverband der Energie- und Wasserwirtschaft, possessive-form=Bundesverbandes der Energie- und Wasserwirtschaft}
\DeclareAcronym{bev}{short=BEV, long=batterieelektrisches Fahrzeug,}
\DeclareAcronym{capex}{short=CAPEX, long=investitionsbedingte Kosten\,/\,Emissionen,}
\DeclareAcronym{co2}{short=CO\textsubscript{2}, long=Kohlenstoffdioxid,}
\DeclareAcronym{dc}{short=DC, long=Gleichstrom,}
\DeclareAcronym{dem}{short=DEM, long=Standortverbrauch,}
\DeclareAcronym{ema}{short=EMA, long=eigene Marktanalyse,}
\DeclareAcronym{ess}{short=ESS, long=Stationärspeicher,}
\DeclareAcronym{flt}{short=FLT, long=Flotte,}
\DeclareAcronym{gcp}{short=GCP, long=Netzanschlusspunkt,}
\DeclareAcronym{gui}{short=GUI, long=grafische Benutzeroberfläche,}
\DeclareAcronym{icev}{short=ICEV, long=verbrennungsmotorisches Fahrzeug,}
\DeclareAcronym{kpi}{short=KPI, long=Leistungskennzahl, plural-form=Leistungskennzahlen}
\DeclareAcronym{lift}{short=LIFT, long=Logistics Infrastructure and Fleet Transformation,}
\DeclareAcronym{cis}{short=CIS, long=Ladeinfrastruktur,}
\DeclareAcronym{opex}{short=OPEX, long=betriebsbedingte Kosten\,/\,Emissionen,}
\DeclareAcronym{pv}{short=PV, long=Photovoltaik,}
\DeclareAcronym{pvgis}{short=PVGIS, long=Photovoltaic Geographical Information System,}
\DeclareAcronym{utc}{short=UTC, long=koordinierte Weltzeit,}


% Set page margins
\geometry{top=1in, bottom=1in, left=1in, right=1in}

\title{\textbf{LIFT}\\Logistics Infrastructure \& Fleet Transformation\\Dokumentation und Anwenderleitfaden}
\author[1]{Brian Dietermann}
\author[1]{Anna Paper}
\author[1]{Philipp Rosner}

\affil[1]{Lehrstuhl für Fahrzeugtechnik, Technische Universität München}
\date{\today}

\begin{document}

% Title page
\maketitle

% Abstract
\begin{abstract}
Das Softwaretool \acs*{lift} dient zur Unterstützung des Planungsprozesses der Elektrifizierung von Nutzfahrzeugflotten sowie des begleitenden Ausbaus des Energiesystems am dazugehörigen Depot.
Über eine grafische, webbasierte Benutzeroberfläche lassen sich der Ist-Zustand von Flotte und Depot sowie ein mögliches Elektrifizierungs- und Ausbauszenario definieren.
Basierend auf einer Energiesystem-Zeitschrittsimulation berechnet \acs*{lift} techno-ökonomische Kennzahlen für beide Szenarien und vergleicht diese.
Dadurch lassen sich erste Erkenntnisse über die Wirkung der geplanten Maßnahmen gewinnen und eine vorläufige Planung der Depoterweiterung ableiten.
Die mit \acs*{lift} erarbeitete Ersteinschätzung bildet die Grundlage für weitere Schritte in der Detailplanung und Realisierung eines entsprechenden Projekts.
\end{abstract}
\newpage
\tableofcontents
\printacronyms

\newpage

\section{Ausgangslage und Zielsetzung}
\label{sec:target}
Das Softwaretool \ac{lift} wurde am Lehrstuhl für Fahrzeugtechnik der Technischen Universität München in Kooperation mit der Rödl GmbH entwickelt.
Es unterstützt die Elektrifizierung von Flotten und den begleitenden Ausbau des Depot-Energiesystems (inkl.~Ladeinfrastruktur) bereits in der frühen Phase mit techno-ökonomischen Potentialabschätzungen und schafft so eine Entscheidungsgrundlage für die Fortsetzung des Planungsprozesses.
Sein primäres Einsatzgebiet ist das initiale Beratungsgespräch zwischen Kundenberater und Flottenbetreiber.
Dafür muss \ac{lift} mit wenigen, schnell abschätzbaren oder bereits bekannten Eingangsparametern auskommen und die Ergebnisse rasch sowie intuitiv verständlich darstellen.

Dies erreicht \ac{lift}, indem es die Ist-Situation (\textit{Baseline}-Szenario) von Depot und Flotte einem möglichen Elektrifizierungs- und Ausbauszenario (\textit{Expansion}-Szenario) gegenüberstellt.
Für beide Szenarien wird anhand der definierten Parameter eine einjährige Zeitschrittsimulation der Energieflüsse im Depot und in der Flotte durchgeführt; auf dieser Basis werden sämtliche techno-ökonomischen Kennzahlen sowie der Vergleich der Szenarien erstellt.
Um die genannten Anforderungen zu erfüllen, arbeitet \ac{lift} mit zulässigen Vereinfachungen und Annahmen, die in einer frühen Planungsphase noch vertretbar sind.

Komplexere Szenarien wie aktive Flexibilitätssteuerung durch prädiktives Energiemanagement oder individuelle Mobilitätsprofile und/oder automatisierte Komponentendimensionierung erfordern dann einerseits detailliertere Daten als auch komplexere Modellierung mit mathematischer Optimierung zur Auflösung der getroffenen Vereinfachungen.
Diese Schritte sind mit anderen Werkzeugen als \ac{lift} im Nachgang des Beratungsgespräches durchzuführen.
Solche Tools verfügen häufig über keine grafische Benutzeroberfläche, müssen gegebenenfalls an den konkreten Anwendungsfall angepasst werden und erfordern insbesondere für die Interpretation der Ergebnisse fachliches Expertenwissen sowie erhebliche Rechenzeit.

\section{Verwendung und \acl*{gui}}
\label{sec:gui}
\ac{lift} ist in Python programmiert und verfügt über eine browserbasierte \ac{gui}, die auf der \textit{streamlit}-Bibliothek basiert.
Die Installation von \ac{lift}, entweder auf einem lokalen Rechner oder auf einem Server ist im \textit{readme} des dazugehörigen \textit{git repository} beschrieben.
Dort wird ebenfalls erläutert, wie der eigentliche Berechnungsalgorithmus von \ac{lift} unabhängig von der \ac{gui} genutzt werden kann, um eine skalierbare Bewertung einer großen Anzahl von Szenarien zu ermöglichen.
Dieses Dokument beschränkt sich auf die Verwendung von \ac{lift} zur Simulation einzelner Szenarien über die integrierte und in \autoref{fig:gui} dargestellte \ac{gui}.

\begin{figure}[h!]
    \centering
    \includegraphics[width=1.0\textwidth]{gui}
    \caption{Die \ac{gui} von \ac{lift} in Version 0.9.1a1 mit der linken Seitenleiste zur Eingabe der Szenario-Parameter und exemplarischer Darstellung von Ergebnissen im rechten Hauptbereich.}
    \label{fig:gui}
\end{figure}

Die Oberfläche ist in zwei Bereiche unterteilt.
Die linke Seitenleiste dient der Eingabe aller Parameter für die nachfolgende Berechnung sowie der Auswahl der Anzeigesprache (derzeit Deutsch und Englisch).
Dabei wird zwischen allgemeinen Parametern (Standort, Energiesystem und wirtschaftliche Kennzahlen), Flottenparametern (unterteilt in vier Nutzfahrzeugklassen) und Parametern der Ladeinfrastruktur unterschieden.
Zu jedem Eingabefeld stehen in der \ac{gui} Hilfetexte bereit, die beim Überfahren des jeweiligen Fragezeichensymbols mit der Maus eingeblendet werden.

Die Simulation und Ergebnisberechnung (siehe \autoref{sec:methods}) wird am unteren Ende der Seitenleiste gestartet.
Der rechte Hauptbereich der \ac{gui} visualisiert anschließend die Ergebnisse.
Die berechneten Kennzahlen werden jeweils vergleichend für das \textit{Baseline}- und das \textit{Expansion}-Szenario dargestellt, um die Wirkung der geplanten Maßnahmen unmittelbar erkennbar zu machen.
Auch für die angezeigten Ergebnisse und Grafiken sind erläuternde Hilfetexte verfügbar, die beim Überfahren des entsprechenden Fragezeichensymbols mit der Maus erscheinen.

\section{Methodik}
\label{sec:methods}

Dieses Kapitel beschreibt den grundsätzlichen Ablauf einer Berechnung mit \ac{lift} sowie die dabei getroffenen qualitativen und methodischen Annahmen.
Quantitative Annahmen (Parameterwerte für die Einzelnutzung in der \ac{gui}) sind hingegen in \autoref{sec:parameters} definiert.

\ac{lift} ermittelt für das \textit{Baseline}- und das \textit{Expansion}-Szenario jeweils die entstehenden Kosten sowie die \ac{co2}-Emissionen.
Beide Größen lassen sich nach ihrer Herkunft in zwei Kategorien unterteilen: Investitionen bzw. Aufbau (\acs{capex}) und Betrieb (\acs{opex}).
Die ursprünglich rein ökonomischen Begriffe \ac{capex} und \ac{opex} werden im Kontext von \ac{lift} aufgrund dieser Parallelität analog auch für die Emissionen verwendet.

Die Szenarien modellieren jeweils ein Energiesystem, das aus mehreren Blöcken besteht, welche reale Systeme abbilden (\autoref{subsec:system}).
Die \ac{capex} dieser Blöcke hängen unmittelbar von den Eingangsparametern ab und können daher direkt (\textit{a priori}) berechnet werden (\autoref{subsec:capex}).
Im Rahmen des Energiesystemmodells werden in jedem simulierten Zeitschritt die Leistungsflüsse heuristisch (regelbasiert) bestimmt (siehe \autoref{subsec:sim}).
Die daraus integrierten Energieflüsse bilden die Grundlage für die Berechnung der \ac{opex} über den Simulationszeitraum (siehe \autoref{subsec:opex}).
Gesamtkosten und -emissionen werden unter Annahme von Blocklebensdauern und entsprechenden Ersatzinvestitionen sowie Kapitalkosten auf einen Projektzeitraum, der typischerweise deutlich länger als der Simulationszeitraum ist, extrapoliert (\autoref{subsec:extrapolation}) und zu ökonomischen bzw. ökologischen \acp{kpi} aggregiert (\autoref{subsec:kpis}).

Dabei wird inhärent die Annahme getroffen, dass im Simulationszeitraum alle relevanten Charakteristika, z.\,B. Schwankungen in der Auslastung der Fahrzeugflotte oder bei der verfügbaren PV-Energie, abgebildet werden.
Saisonale Effekte sind bei einer Simulationsdauer von einem Jahr, wie sie in der \ac{gui} standardmäßig verwendet wird, ausreichend berücksichtigt.

\subsection{Energiesystemblöcke}
\label{subsec:system}

Ein modelliertes Energiesystem beinhaltet stets die folgenden Blöcke.
Sollte die Berücksichtigung eines Blocks bzw. Systems nicht gewünscht sein, dann kann dies durch entsprechende Parameterwahl (z.\,B.~$P=0$) erreicht werden.

Der \textbf{\acf{gcp}} modelliert die leistungsbeschränkte Schnittstelle zum elektrischen Netz unabhängig von dessen Spannungsebene, also die örtliche Messstelle, an der Leistungspreis und Arbeitspreis anfallen.
Der Leistungspreis wird grundsätzlich auf Jahresbasis berücksichtigt.
Bei Zeitschritten größer als \SI{15}{\minute} (dem realen Abrechnungsintervall des Leistungspreises) werden Lastspitzen jedoch gemittelt und damit gedämpft.
Blindleistung im Wechselstromnetz wird nicht berücksichtigt.

Die \textbf{\ac{pv}-Anlage} modelliert ein homogen und unbeweglich für maximales Energiepotential ausgerichtetes und aufgeständertes Array von polykristallinen \ac{pv}-Modulen inklusive ihres Wechselrichters.
Das entsprechende zeitvariable Leistungspotential wird für den gewählten Standort in stündlicher Auflösung vom \ac{pvgis} der Europäischen Union für das Bezugsjahr 2023 abgerufen.
Neuere oder zeitlich feiner aufgelöste Daten sind bei diesem Anbieter nicht verfügbar.
Temperatureffekte sowie Verschattung durch Wolken (im Referenzjahr) und Gelände sind enthalten, Verschattungen durch Gebäude oder Vegetation jedoch nicht.
Die heruntergeladenen Daten für einen Standort werden zwischengespeichert und in derselben Session nicht nochmals angefordert, was die Netzwerkanforderungen bei lokaler Ausführung reduziert.

Der \textbf{\acf{ess}} modelliert einen stationären und verlustfreien Batteriespeicher mit einer maximalen Lade- und Entladeleistung (``C-Rate'') von \SI{0.5}{\per\hour} bzw. \si{C}.
Eine vollständige Be- oder Entladung ist somit frühestens nach \SI{2}{\hour} möglich, was der Leistungsgrenze gängiger stationärer Speichersysteme entspricht.
Alterungseffekte und Einschränkungen des nutzbaren Ladezustandsbereichs werden nicht berücksichtigt.

Der \textbf{\acf{dem}} modelliert den Energieumsatz der Gebäude und sonstiger Infrastruktur am Standort exklusive der vorhandenen oder aufzubauenden \acl{cis}.
Dafür werden auswählbare \ac{bdew}-Standardlastprofile verwendet, die auf den angegebenen Jahresverbrauch skaliert werden.
Aufgrund ihrer stündlichen Auflösung und der ihnen zugrunde liegenden Methodik sind sie jedoch nur bedingt geeignet, einen realen Lastgang nachzubilden, da sie eine stark geglättete Charakteristik aufweisen und verfälschen die in der Simulation auftretenden Lastspitzen am \ac{gcp} gegenüber der Realität.
Im Rahmen einer Erstberatung ist diese Vereinfachung zwar nötig und zulässig, um schnell Potentiale abzuschätzen, in weiteren Planungsphasen ist davon jedoch abzuraten.

Die \textbf{\acf{cis}} modelliert mehrere (in der \ac{gui} zwei, siehe \autoref{sec:parameters}) Klassen von Ladepunkten für Fahrzeuge, von der jeweils mehrere Ladepunkte existieren.
Die gesamte Ladeinfrastruktur unterliegt einem Lastmanagement, das entweder statisch oder dynamisch ausgelegt sein kann.
Das statische Lastmanagement begrenzt in jedem Zeitschritt die für die gesamte \ac{cis} klassenübergreifend zur Verfügung stehende Ladeleistung auf einen in der \ac{gui} konstanten Wert.
Dieser wird normalerweise bestimmt, indem die Spitzenlast des Standortverbrauchs von der maximalen Leistung des Netzanschlusspunktes abgezogen wird.
Für große Simulationszeitschritte ($>\SI{15}{\minute}$) verhält sich das statische Lastmanagement nicht realistisch, da \ac{dem}-Lastspitzen, die die maximale Ladeleistung maßgeblich bestimmen, zu stark geglättet werden.
Das dynamische Lastmanagement berechnet für jeden Zeitschritt die für die Flotte zur Verfügung stehende Leistung.
Dazu wird die maximale Leistung des Netzanschlusses, die aktuell zur Verfügung stehende \ac{pv}-Leistung und die maximale Leistung des Stationärspeichers unter Berücksichtigung des Ladezustands addiert und von diesem Wert der Standortverbrauch subtrahiert.
Die verbleibende Leistung steht der Ladeinfrastruktur zur Verfügung.

Die \textbf{\acf{flt}} besteht aus mehreren (in der \ac{gui} vier, siehe \autoref{sec:parameters}) Subflotten, die jeweils Fahrzeuge des gleichen Typs und Nutzungsprofils zusammenfassen.
Dies können entweder rein verbrennungsmotorisch oder batterieelektrisch angetriebene Fahrzeuge sein, hybride Mischformen sind nicht abgebildet.
Das Mobilitätsprofil einer Subflotte beinhaltet Zeitreihen, in denen für jedes Fahrzeug die Anwesenheit am Depot sowie der Energieverbrauch von Fahrten definiert wird.
Dieses Profil ist (im Falle der \ac{gui} aus stochastischem Sampling, siehe \autoref{sec:parameters}) vordefiniert und als Datei abgelegt. \todo{taucht noch nicht in Quantitativen Annahmen auf}
Jedes Fahrzeug ist nur mit der in der Subflotte definierten Ladepunktklasse kompatibel.
Die tatsächlich maximale Ladeleistung eines Fahrzeugs entspricht dem Minimum aus in der Subflotte definierten Fahrzeugladeleistung und der in der assoziierten Ladepunktklasse definierten Leistung.
Je nach Flottengröße und \ac{cis}-Konfiguration sind sowohl die Anzahl verfügbarer Ladepunkte als auch die aktuell zur Verfügung stehende Ladeleistung eine knappe Resource.
Eine Priorisierung nach kleinster ``Flexibilitätszeit'' (Restzeit bis zum spätestmöglichen Ladebeginn, um die kommende Fahrt ohne öffentliches Laden zu erfüllen) verteilt beide Ressourcen in jedem Zeitschritt unter allen Fahrzeugen der Flotte.
Öffentliches (On-Route-) Laden wird daher nur bei unbedingter Notwendigkeit und auch in geringstmöglichem Umfang genutzt, sodass solche Fahrten mit einem Ladezustand von \SI{0}{\percent} wieder am Depot enden.
Dem Priorisierungsalgorithmus liegt die Annahme zugrunde, dass physische Ladepunkte und damit Parkplätze in jedem Zeitschritt neu verteilt werden können.
Eine Vereinfachung, die bei sehr kleinen Zeitschritten in der Realität nicht haltbar wäre.

\subsection{\acs{capex}-Berechnung}
\label{subsec:capex}

Beim Aufbau jedes Blocks $b$ mit Ausnahme von \ac{dem} entstehen ökonomische (\autoref{eq:capex_init_econ}) und ökologische (\autoref{eq:capex_init_ecol}) \ac{capex}, die mit $C^b_{cap}$ und $E^b_{cap}$ bezeichnet werden.
Für die kontinuierlich dimensionierbaren Blöcke $b_\text{cont}$ (\ac{gcp}, \ac{pv} und \ac{ess}) werden diese jeweils linear in Abhängigkeit von der gewählten Blockgröße $S^b$ sowie den spezifischen Werten pro Größeneinheit $c^b_{\mathrm{cap}}$ und $e^b_{\mathrm{cap}}$ berechnet.
Bei den in diskrete Elemente unterteilten Blöcke $b_\text{dis}$ (\ac{cis} und \ac{flt}) ist hingegen keine Dimensionierungsabhängigkeit vorgesehen, sondern es entstehen feste \ac{capex} $c_{ \mathrm{cap}, m}$ pro Element $n$ (Fahrzeug oder Ladepunkt) einer Subklasse $m$ (Fahrzeug- bzw. Ladepunktklasse).
Die diskreten Kosten $c_{\mathrm{cap}, m}$ sind in der \ac{gui} frei einstellbar, für spezifische Emissionen pro Element ist dies nicht vorgesehen.

\begin{subequations}
    \label{eq:capex_init}
    \begin{align}
        C_{cap, init} = & \sum_{b}{C^b_{cap}}= \sum_{b_\text{cont}}{S^b \cdot c^b_{cap}} + \sum_{b_\text{dis}}{\sum_{m,n}{c^n_{cap, m}}} \label{eq:capex_init_econ}\\
        E_{cap, init} = & \sum_{b}{E^b_{cap}} = \sum_{b_\text{cont}}{S^b \cdot e^b_{cap}} + \sum_{b_\text{dis}}{\sum_{m,n}{e^n_{cap, m}}}\label{eq:capex_init_ecol}
    \end{align}
\end{subequations}

Ersatzinvestitionen werden je Block nach Ablauf der parametrierten Lebensdauer mit konstanten Nominal-\ac{capex} berücksichtigt.
Die ökonomischen \ac{capex} werden gemäß \autoref{subsec:extrapolation} diskontiert.
Mögliche Unterschiede in Lebensdauern verhindern eine sinnvolle Aggregation von \ac{capex} über Subblöcke.

\subsection{Zeitschrittsimulation und Energiemanagement}
\label{subsec:sim}

Die in \ac{lift} verwendete Zeitschrittsimulation simuliert die Energieflüsse im Energiesystem des Depots und der zugehörigen Flotte über einen gleichmäßig in Zeitschritte geteilten Simulationszeitraum.
In jedem Zeitschritt wird der addierte Leistungsbedarf von Standortverbrauches und Flotte, der mithilfe des  \ac{cis}-Lastmanagements ermittelt wird (\autoref{subsec:system}), in absteigender Priorität aus \ac{pv} (soweit zum jeweiligen Zeitpunkt verfügbar), Stationärspeicher (soweit zum jeweiligen Zeitpunkt geladen) und Netzanschluss gedeckt.
Im Fall, dass die \ac{pv} den Leistungsbedarf alleine erfüllen kann, wird der Stationärspeicher mit der durch Leistungsbeschränkung oder Ladezustand limitierten maximalen Leistung geladen.
Weitere überschüssige Leistung wird bis zur Leistungsgrenze des Netzanschlusses ins Netz eingespeist, bevor \ac{pv}-Potential abgeregelt wird.
Diese regelbasierte Energiemanagementstrategie wird üblicherweise als „Nulllastregelung“ bezeichnet.

Eine zu knappe Dimensionierung der Quellenblöcke kann trotz szenariobasierter Anpassung zu nicht erfüllbaren Leistungsanforderungen führen und löst eine entsprechende Fehlermeldung („Netzanschlussfehler“) aus.
Wirkungsgrade, dynamische Stromtarife sowie Flexibilitätsoptionen werden nicht berücksichtigt.
Die beiden letztgenannten Aspekte lassen sich mit rein regelbasierten Strategien nicht sinnvoll ausschöpfen und erfordern anspruchsvollere, situationsadaptive Ansätze wie mathematische Optimierung und/oder Methoden des Machine Learning.

\subsection{\acs{opex}-Berechnung}
\label{subsec:opex}

\ac{opex} fallen ausschließlich in den Blöcken \ac{gcp} und \ac{flt} an.

Am \textbf{\ac{gcp}} fallen sowohl in Abhängigkeit des Energiedurchsatzes in Bezugs- ($W^{GCP}_\text{buy}$) und Einspeiserichtung ($W^{GCP}_\text{sell}$) als auch der Spitzenlast im Simulationszeitraum ($P^{GCP}_\text{peak}$) ökonomische \ac{opex} gemäß \autoref{eq:opex_gcp} an.
Die spezifischen Kostenwerte $c^{GCP}_\text{buy}$ und $c^{GCP}_\text{sell}$ werden dabei sinngemäß positiv bzw. negativ verrechnet, obwohl letzterer in der \ac{gui} positiv definiert ist.
Alle spezifischen Kostenwerte $c^{GCP}$ sind in der \ac{gui} anpassbar.
Die ökologischen \ac{opex} beruhen hingegen ausschließlich auf dem Bezugsenergiedurchsatz, da eingespeiste Energie emissionsfrei verrechnet wird.
Der zugehörige spezifische Emissionsfaktor $e^{GCP}_\text{buy}$ entspricht dem aktuellen Strommix und ist in der \ac{gui} nicht anpassbar.

\begin{subequations}
    \label{eq:opex_gcp}
    \begin{align}
        C^{GCP}_{op, sim} = & \, W^{GCP}_\text{buy} \cdot c^{GCP}_\text{buy} + W^{GCP}_\text{sell} \cdot c^{GCP}_\text{sell} + P^{GCP}_\text{peak} \cdot c^{GCP}_\text{peak} \label{eq:opex_gcp_econ}\\
        E^{GCP}_{op,sim} = & W^{GCP}_\text{buy} \cdot e^{GCP}_\text{buy} \label{eq:opex_gcp_ecol}
    \end{align}
\end{subequations}

In der \textbf{\ac{flt}} muss zur Berechnung der \ac{opex} gemäß \autoref{eq:opex_flt} nach verbrennungsmotorischen Subflotten $i$ und batterieelektrischen Subflotten $j$ unterschieden werden.
Die Kosten und Emissionen der am Depot geladenen Energie für letztere sind bereits im Energiesystem bzw. \ac{gcp} erfasst und daher im Gegensatz zum öffentlichen Laden nicht der Flotte zugeordnet.

\begin{subequations}
    \label{eq:opex_flt}
    \begin{align}
        C^{FLT}_{op, sim} = & \sum_{i}{d^{i} \left(c^{i}_\text{mnt} + c^{i}_\text{toll} \cdot x^{i}_\text{toll} + c_\text{fuel} \cdot b^{i}\right)} + \sum_{j}{d^{j}} \cdot \left(c^{j}_\text{mnt} + c^{j}_\text{toll} \cdot x^{j}_\text{toll}\right) + {W^{j}_\text{pub} \cdot c_\text{pub}}\\
        E^{FLT}_{op,sim} = & \sum_{i}{d^{i} \cdot b^{i} \cdot e_\text{fuel}} + \sum_{j}{W^{j}_\text{pub} \cdot e^{GCP}_\text{buy}} \label{eq:opex_flt_ecol}
    \end{align}
\end{subequations}

Dabei bezeichnen *$d^{i/j}$ die gefahrene Distanz aller Fahrzeuge der Subflotte $i$ oder $j$, $c^{i/j}_\text{mnt}$ ihre spezifischen Wartungskosten pro Kilometer, $c^{i/j}_\text{toll}$ ihre spezifischen Mautkosten pro Kilometer, *$x^{i/j}_\text{toll}$ ihren Anteil der mautpflichtigen Strecken, *$c_\text{fuel}$ die spezifischen Dieselkosten pro Liter, $b^i$ ihren spezifischen Kraftstoffverbrauch \si{\liter\per\kilo\meter}, $W^{j}_\text{pub}$ die öffentlich geladenene Energie aller Fahrzeuge der Subflotte $j$ und *$c_\text{pub}$ die öffentlichen Ladekosten pro \si{\kilo\watt\hour}.
Die mit * markierten Werte sind in der \ac{gui} einstellbar.
Für die Emissionen öffentlichen Ladens wird der Emissionsfaktor des Standort-Strommixes verwendet.

\subsection{Extrapolation}
\label{subsec:extrapolation}

Zur Ermittlung der \ac{capex} und \ac{opex} über den gesamten Projektzeitraum werden die Simulationsergebnisse extrapoliert und im Falle der Kosten diskontiert.
In \ac{lift} erfolgt dies intern vektorisiert, sodass nominale \ac{capex}, nominale \ac{opex} und Diskontierungsfaktor für jedes Projektjahr einzeln vorliegen.

\ac{capex} treten gemäß \autoref{eq:extrapolation_capex} bei der Anfangsinvestition sowie bei jeder Ersatzinvestition $i$ eines Blocks $b$ entsprechend dessen Lebensdauer $ls^b$ auf.
Sie werden mit dem Kapitalkostensatz $r$ zu Beginn des jeweiligen Projektjahres diskontiert und über alle Blöcke summiert.
Anfangsinvestitionen bei $t=0$ bleiben daher effektiv undiskontiert.
Der Restwert $C^b_{res}$ jedes Blocks zum Ende des Projektzeitraumes wird sinngemäß als negative Kosten verrechnet und verhindert Sprungeffekte in den Ergebnissen bei Variation diskreter Parameter wie Lebensdauern.
Der Wertverlust wird als linear über die Lebensdauer angenommen.

\begin{subequations}
    \label{eq:extrapolation_capex}
    \begin{align}
        C_\text{cap, prj} = & \sum_{b}{ \left( \left( \sum_{i}{\frac{C^b_\text{cap}}{\left(1 + r\right)^{t(i)}}} \right) - C^b_{\text{res}}} \right) , \quad t(i) \in n \cdot ls^b, n \in \left\{x \in \mathbb{N}_0 \vert x \leqq \left\lfloor\frac{t_\text{prj}}{ls^b}\right\rfloor\right\}\label{eq:extrapolation_capex_econ}\\
        C^{b}_\text{res} = & \begin{cases}
    C^b_\text{cap} \cdot \left( 1 - \frac{(t_\text{prj} \bmod ls^b)}{ls^b} \right) & \text{if } t_{prj} \bmod ls^b \neq 0 \\
    0 & \text{if } t_{prj} \bmod ls^b = 0
    \end{cases}
    \label{eq:extrapolation_capex_residual}\\
        E_\text{cap, prj} = & \sum_{b}{\sum_{i}{E^b_\text{cap}}} \label{eq:extrapolation_capex_ecol}
    \end{align}
\end{subequations}

Im Gegensatz dazu werden \ac{opex} des Simulationszeitraums gemäß \autoref{eq:extrapolation_opex} zunächst linear auf ein volles Jahr hochskaliert.
Es wird angenommen, dass jedes Projektjahr $y \in \{x \in \mathbb{N}_0 \mid x < t_\text{prj}\}$ diesem skalierten Jahr entspricht und die \ac{opex} jeweils am Jahresende anfallen.
Ökonomische \ac{opex} werden daher mit dem Exponenten $y+1$ diskontiert.

\begin{subequations}
    \label{eq:extrapolation_opex}
    \begin{align}
        C_\text{op, prj} = & \sum_{b}{\sum_{y}{\frac{C^{GCP}_\text{op, sim} + C^{FLT}_\text{op, sim}}{t_\text{sim, y} \left(1 + r\right)^{y+1}}}} \label{eq:extrapolation_opex_econ}\\
        E_\text{op, prj} = & \sum_{b}{\sum_{y}{\frac{E^{GCP}_\text{op, sim} + E^{FLT}_\text{op, sim}}{t_\text{sim, y}}}} \label{eq:extrapolation_opex_ecol}
    \end{align}
\end{subequations}

\subsection{\acf{kpi}}
\label{subsec:kpis}

In \ac{lift} werden technische sowie ökonomische und ökologische \acp{kpi} unterschieden.
Erstere werden über den Simulationszeitraum auf Basis von Energieflüssen berechnet und dienen als Anhaltspunkt, ob sich die definierten Größen für \ac{gcp}, \ac{pv} und \ac{ess} sowie die gewählte Ladeinfrastruktur in einem für das System vorteilhaften Rahmen bewegen.
Es sei darauf hingewiesen, dass die technischen \acp{kpi} stark an Aussagekraft einbüßen, sobald Wirkungsgrade und größere Dynamiken wie bidirektionales Laden und dynamische Netzbezugskosten modelliert werden.
Dabei wird die lokal genutzte Energie $W^{cons}_\text{sim}$ gemäß \autoref{eq:energy_boundaries} als die in \ac{dem} und \ac{flt} aus dem Depot abgeflossene Energie definiert.
Sinngemäß sind alle anderen Energieabflüsse, also das abgeregelte \ac{pv}-Energiepotential $W^{PV}_\text{curt,sim}$ und die am \ac{gcp} eingespeiste Energie $W^{GCP}_\text{sell}$ als extern genutzt zu werten.

\begin{subequations}
    \label{eq:energy_boundaries}
    \begin{align}
        W^{loc}_\text{sim} = & W^{FLT}_\text{dep, sim} + W^{DEM}_\text{sim} \label{eq:cons_loc} \\
        W^{ext}_\text{sim} = & W^{PV}_\text{curt,sim} + W^{GCP}_\text{sell} \label{eq:cons_ext}
    \end{align}
\end{subequations}

Die \textbf{Eigenverbrauchsquote} $\gamma_{sc}$ gemäß \autoref{eq:selfconsumption} gibt an, welcher Anteil des \ac{pv}-Energiepotentials lokal genutzt wurde.
Dies kann entweder direkt oder auch indirekt über die extern genutzte Energie berechnet werden
Sowohl sehr geringe als auch eine sehr hohe Werte von $\gamma_{sc}$  sind nicht vorteilhaft: Erstere deuten auf eine überdimensionierte, letztere auf eine unterdimensionierte \ac{pv}-Anlage hin.

\begin{equation}
    \gamma_{sc} = \frac{W^{loc}_\text{sim}}{W^{PV}_\text{pot}} = 1 - \frac{W^{ext}_\text{sim}}{W^{PV}_\text{pot}}
    \label{eq:selfconsumption}
\end{equation}\\

Der \textbf{Autarkiegrad} $\gamma_{ss}$ gemäß \autoref{eq:selfsufficiency} gibt an, welcher Anteil der lokal genutzten Energie auch lokal bzw. aus \ac{pv} bereitgestellt wurde.
Ein sehr hoher Autarkiegrad deutet auf eine für den Verbrauch am Standort aus ökonomischer Sicht zu überdimensionierte Kombination aus \ac{pv} und \ac{ess} hin.

\begin{equation}
    \gamma_{ss} = \frac{W^{PV}_\text{pot, sim} - W^{PV}_\text{curt} - E^{GCP}_\text{sell}}{W^{loc}_\text{sim}}
    \label{eq:selfsufficiency}
\end{equation}

Der \textbf{Depotladegrad} $\gamma_{ch}$ gemäß \autoref{eq:homecharging} gibt an, welcher Energieanteil über die gesamte \ac{flt} am Depot geladen wurde.
Ein sehr geringer Wert deutet auf Limitationen durch Ladepunkt- oder Ladeleistungsverfügbarkeit.
Für letztere können die Dimensionierungen von \ac{cis} und\,/\,oder \ac{gcp} ursächlich sein.
Da die lokalen Energiekosten im Vergleich zum öffentlichen Laden meist geringer ausfallen, ist hier ein möglichst hoher Wert anzustreben.

\begin{equation}
    \gamma_{ch} = \frac{W^{FLT}_\text{dep, sim}}{W^{FLT}_\text{dep, sim} + W^{FLT}_\text{pub, sim}}
    \label{eq:homecharging}
\end{equation}

Die ökonomischen und ökologischen \acp{kpi} basieren auf den gemäß \autoref{subsec:extrapolation} nach Projektjahren aufgelösten, diskontierten Gesamtkosten bzw. -emissionen, die in der \ac{gui} als Cashflow-Diagramm visualisiert werden.

Die \textbf{Amortisationszeit} $t_\text{pb}$ gibt das erste Projektjahr an, in dem das \textit{Expansion}-Szenario geringere kumulierte Gesamtkosten bzw. -emissionen als das \textit{Baseline}-Szenario aufweist.
Aufgrund diskontinuierlicher \ac{capex} können bei manchen Parameterkonstellationen mehrere Amortisationspunkte auftreten, hierbei wird jedoch lediglich das erste ausgegeben.

\newpage

\section{Quantitative Annahmen}
\label{sec:parameters}

Alle in \ac{lift} verwendeten und nicht in der \ac{gui} verwendeten Parameter bzw. quantitativen Annahmen sowie deren Werte und Quellen sind in \autoref{tab:parameters} zusammengefasst.

\begin{scriptsize}
\begin{center}
\input{tab_params.tex}
\end{center}
\end{scriptsize}

\todo[inline]{Tabelle hatte 2 unterschiedliche Preissätze (GCP, c_pub etc.) und 12 Jahre Batt-ls - prüfen!}

\section{Quellen}
\bibliographystyle{unsrtnat}
\bibliography{references}

\listoftodos

\end{document}
